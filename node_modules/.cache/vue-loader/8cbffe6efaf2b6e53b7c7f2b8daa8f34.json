{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/views/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/views/index.vue","mtime":1609725974283},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n//import {createText} from '../api/text/marry'\nimport {createText} from '../api/system/user'\n\nimport { regionData , CodeToText} from 'element-china-area-data';\nimport Defendant from './components/defendant/defendant'\nimport Plaintiff from './components/plaintiff/plaintiff'\nimport Factual from './components/marriage/factual'\nimport Claims from './components/marriage/claims'\n\nfunction buildTextPlaintiff(plaintiff) {\n  let textPlaintiff = plaintiff;\n  return textPlaintiff\n}\n\nfunction buildTextDefendant(defendant) {\n  let textDefendant = defendant;\n  return textDefendant\n}\n\nfunction buildTextFactual(factual) {\n  let textFactual = {};\n  textFactual.acquaintanceTime = factual.acquaintanceTime;\n  textFactual.registerTime  = factual.registerTime;\n  let registerPlace =\"\";\n  for( let place of factual.registerPlace){\n    registerPlace=registerPlace+CodeToText[place];\n  }\n  textFactual.registerPlace = registerPlace;\n\n  if(factual.remarrySituation.length > 1){\n    textFactual.remarrySituationEnum = 'A'\n  }else {\n    if(factual.remarrySituation.length > 0){\n      if(\"neither\" != factual.remarrySituation[0]){\n        textFactual.remarrySituationEnum=factual.remarrySituation[0];\n      }\n    }\n  }\n  textFactual.childs = factual.childs;\n  textFactual.divorceTime  =  factual.divorceTime\n  textFactual.remarryTime = factual.remarryTime\n  textFactual.divorceReasonList = factual.divorceReasonList\n  textFactual.sueTime = factual.sueTime\n  textFactual.suitor = factual.suitor\n  textFactual.sueResult = factual.sueResult\n\n  return textFactual\n}\n\nfunction buildChildClaimText(childs) {\n  let text = \"婚生\";\n  for(let child of childs){\n    if(\"M\" == child.sex){\n      text=text + \"儿子\";\n    }else{\n      text=text + \"女儿\";\n    }\n    text=text + child.name +\"和\";\n  }\n  text = text.substring(0,text.length-1);\n  text=text+\"由原告抚养,\"\n  return text;\n}\n\nfunction buildTextClaim(claims,factual) {\n  let tempClaims = [];\n  tempClaims.push(\"判令原、被告解除婚姻关系；\");\n\n  let custodysText = '';\n  if(claims.claimCustody == 'Y'){\n    custodysText =buildChildClaimText(factual.childs);\n  }else if(claims.custodys.length > 0){\n    let childs = [];\n    for(let custodyName of claims.custodys){\n      for(let children of factual.childs){\n        if(custodyName.toString() == children.name){\n          childs.push(children)\n        }\n      }\n    }\n    custodysText =buildChildClaimText(childs)\n  }\n\n  if(\"Y\" == claims.support){\n    if(\"M\" == claims.custodyPayAction){\n      custodysText = custodysText+\"被告依法支付抚养费每月\"+claims.custodyMoney+\"元，直至子女成年；\"\n    }else if(\"O\" == claims.custodyPayAction){\n      custodysText = custodysText+\"被告依法支付抚养费一次性\"+claims.custodyMoney+\"元，\"\n    }\n  }\n  custodysText = custodysText.substring(0,custodysText.length-1)+\";\"\n  tempClaims.push(custodysText);\n  tempClaims.push(\"本案诉讼费由被告承担。\")\n\n  let textClaims = []\n  for(let i=0;i<=tempClaims.length-1;i++){\n    textClaims.push((i+1)+\"、\"+tempClaims[i]);\n  }\n  return textClaims\n}\n\nexport default {\n  name: 'demo',\n  data() {\n    return {\n      activeNames: [],\n      steps: [\n        {\n          label: '原告信息',\n          slot: 'page1',\n          nextStepLabel: { default: '下一步' }\n        },\n        {\n          label: '事实与理由',\n          slot: 'factual'\n        },\n        {\n          label: '诉讼请求',\n          slot: 'claims',\n          options: {\n            nextDisabled: false // control whether next is disabled or not\n          }\n        }\n      ],\n      plaintiff: {  //原告\n      },\n      defendant: {}, //被告\n      factual:{   //事实\n        childNum: 0,\n        hasChild: '',\n        remarrySituation:[],\n        childs: [{ name: '',sex:'',birth:'' }],\n        divorceReasonList: [],\n      },\n      claims:{},\n      nextStepLabel: '下一步',\n      previousStepLabel: '上一步',\n      finalStepLabel: '完成',\n    }\n  },\n  components:{Defendant,Plaintiff,Factual,Claims},\n  methods: {\n    nextClicked(currentPage) {\n      if(currentPage == 2){\n        let text = {};\n        text.plaintiff=buildTextPlaintiff(this.plaintiff);\n        text.defendant=buildTextDefendant(this.defendant);\n        text.factual=buildTextFactual(this.factual);\n        text.claims =buildTextClaim(this.claims,this.factual);\n        let data =JSON.stringify(text);\n        createText(data).then(response =>{\n          this.downloadFile(response);\n        }).catch(response=>{\n          this.downloadFile(response);\n        });\n      }\n      return true\n    },\n    downloadFile(data){\n      let blob = new Blob([data], {type: 'application/docx'})\n      let url = window.URL.createObjectURL(blob)\n      const link = document.createElement('a') // 创建a标签\n      link.href = url\n      link.download = '起诉状.doc' // 重命名文件\n      link.click()\n      URL.revokeObjectURL(url)\n    },\n    backClicked(currentPage) {\n      return true //return false if you want to prevent moving to previous page\n    },\n    updateClaims(data){\n      this.claims =data;\n    }\n  },\n}\n",null]}