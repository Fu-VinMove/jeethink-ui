{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/views/system/dict/data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/views/system/dict/data.vue","mtime":1590989844000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { listData, getData, delData, addData, updateData, exportData } from \"@/api/system/dict/data\";\r\nimport { listType, getType } from \"@/api/system/dict/type\";\r\n\r\nexport default {\r\n  name: \"Data\",\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 字典表格数据\r\n      dataList: [],\r\n      // 默认字典类型\r\n      defaultDictType: \"\",\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 状态数据字典\r\n      statusOptions: [],\r\n      // 类型数据字典\r\n      typeOptions: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        dictName: undefined,\r\n        dictType: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        dictLabel: [\r\n          { required: true, message: \"数据标签不能为空\", trigger: \"blur\" }\r\n        ],\r\n        dictValue: [\r\n          { required: true, message: \"数据键值不能为空\", trigger: \"blur\" }\r\n        ],\r\n        dictSort: [\r\n          { required: true, message: \"数据顺序不能为空\", trigger: \"blur\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    const dictId = this.$route.params && this.$route.params.dictId;\r\n    this.getType(dictId);\r\n    this.getTypeList();\r\n    this.getDicts(\"sys_normal_disable\").then(response => {\r\n      this.statusOptions = response.data;\r\n    });\r\n  },\r\n  methods: {\r\n    /** 查询字典类型详细 */\r\n    getType(dictId) {\r\n      getType(dictId).then(response => {\r\n        this.queryParams.dictType = response.data.dictType;\r\n        this.defaultDictType = response.data.dictType;\r\n        this.getList();\r\n      });\r\n    },\r\n    /** 查询字典类型列表 */\r\n    getTypeList() {\r\n      listType().then(response => {\r\n        this.typeOptions = response.rows;\r\n      });\r\n    },\r\n    /** 查询字典数据列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listData(this.queryParams).then(response => {\r\n        this.dataList = response.rows;\r\n        this.total = response.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    // 数据状态字典翻译\r\n    statusFormat(row, column) {\r\n      return this.selectDictLabel(this.statusOptions, row.status);\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        dictCode: undefined,\r\n        dictLabel: undefined,\r\n        dictValue: undefined,\r\n        dictSort: 0,\r\n        status: \"0\",\r\n        remark: undefined\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.queryParams.dictType = this.defaultDictType;\r\n      this.handleQuery();\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.open = true;\r\n      this.title = \"添加字典数据\";\r\n      this.form.dictType = this.queryParams.dictType;\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.dictCode)\r\n      this.single = selection.length!=1\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const dictCode = row.dictCode || this.ids\r\n      getData(dictCode).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改字典数据\";\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.dictCode != undefined) {\r\n            updateData(this.form).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(\"修改成功\");\r\n                this.open = false;\r\n                this.getList();\r\n              }\r\n            });\r\n          } else {\r\n            addData(this.form).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(\"新增成功\");\r\n                this.open = false;\r\n                this.getList();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const dictCodes = row.dictCode || this.ids;\r\n      this.$confirm('是否确认删除字典编码为\"' + dictCodes + '\"的数据项?', \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(function() {\r\n          return delData(dictCodes);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.msgSuccess(\"删除成功\");\r\n        }).catch(function() {});\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      const queryParams = this.queryParams;\r\n      this.$confirm('是否确认导出所有数据项?', \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(function() {\r\n          return exportData(queryParams);\r\n        }).then(response => {\r\n          this.download(response.msg);\r\n        }).catch(function() {});\r\n    }\r\n  }\r\n};\r\n",null]}