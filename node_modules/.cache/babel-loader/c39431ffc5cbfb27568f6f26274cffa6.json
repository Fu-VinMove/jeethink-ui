{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/request.js","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/request.js","mtime":1590989844000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/fuwenmu/Downloads/jeethink\\u524D\\u540E\\u5206\\u79BB\\u5F00\\u53D1\\u6846\\u67B6/jeethink\\u5FEB\\u901F\\u5F00\\u53D1\\u6846\\u67B6\\uFF08\\u524D\\u540E\\u5206\\u79BB\\uFF09_V2.3/jeethink-ui/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _elementUi = require(\"element-ui\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _errorCode = _interopRequireDefault(require(\"@/utils/errorCode\"));\n\n_axios.default.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'; // 创建axios实例\n\nvar service = _axios.default.create({\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\n  baseURL: process.env.VUE_APP_BASE_API,\n  // 超时\n  timeout: 10000\n}); // request拦截器\n\n\nservice.interceptors.request.use(function (config) {\n  // 是否需要设置 token\n  var isToken = (config.headers || {}).isToken === false;\n\n  if ((0, _auth.getToken)() && !isToken) {\n    config.headers['Authorization'] = 'Bearer ' + (0, _auth.getToken)(); // 让每个请求携带自定义token 请根据实际情况自行修改\n  }\n\n  return config;\n}, function (error) {\n  console.log(error);\n  Promise.reject(error);\n}); // 响应拦截器\n\nservice.interceptors.response.use(function (res) {\n  // 未设置状态码则默认成功状态\n  var code = res.data.code || 200; // 获取错误信息\n\n  var message = _errorCode.default[code] || res.data.msg || _errorCode.default['default'];\n\n  if (code === 401) {\n    _elementUi.MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\n      confirmButtonText: '重新登录',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).then(function () {\n      _store.default.dispatch('LogOut').then(function () {\n        location.reload(); // 为了重新实例化vue-router对象 避免bug\n      });\n    });\n  } else if (code === 500) {\n    (0, _elementUi.Message)({\n      message: message,\n      type: 'error'\n    });\n    return Promise.reject(new Error(message));\n  } else if (code !== 200) {\n    _elementUi.Notification.error({\n      title: message\n    });\n\n    return Promise.reject('error');\n  } else {\n    return res.data;\n  }\n}, function (error) {\n  console.log('err' + error);\n  (0, _elementUi.Message)({\n    message: error.message,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nvar _default = service;\nexports.default = _default;",{"version":3,"sources":["/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/request.js"],"names":["axios","defaults","headers","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","isToken","error","console","log","Promise","reject","response","res","code","data","message","errorCode","msg","MessageBox","confirm","confirmButtonText","cancelButtonText","type","then","store","dispatch","location","reload","Error","Notification","title","duration"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEAA,eAAMC,QAAN,CAAeC,OAAf,CAAuB,cAAvB,IAAyC,gCAAzC,C,CACA;;AACA,IAAMC,OAAO,GAAGH,eAAMI,MAAN,CAAa;AAC3B;AACAC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBAFM;AAG3B;AACAC,EAAAA,OAAO,EAAE;AAJkB,CAAb,CAAhB,C,CAMA;;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC;AACA,MAAMC,OAAO,GAAG,CAACD,MAAM,CAACX,OAAP,IAAkB,EAAnB,EAAuBY,OAAvB,KAAmC,KAAnD;;AACA,MAAI,yBAAc,CAACA,OAAnB,EAA4B;AAC1BD,IAAAA,MAAM,CAACX,OAAP,CAAe,eAAf,IAAkC,YAAY,qBAA9C,CAD0B,CAC+B;AAC1D;;AACD,SAAOW,MAAP;AACD,CAPD,EAOG,UAAAE,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAG,EAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf;AACH,CAVD,E,CAYA;;AACAZ,OAAO,CAACO,YAAR,CAAqBU,QAArB,CAA8BR,GAA9B,CAAkC,UAAAS,GAAG,EAAI;AACrC;AACA,MAAMC,IAAI,GAAGD,GAAG,CAACE,IAAJ,CAASD,IAAT,IAAiB,GAA9B,CAFqC,CAGrC;;AACA,MAAME,OAAO,GAAGC,mBAAUH,IAAV,KAAmBD,GAAG,CAACE,IAAJ,CAASG,GAA5B,IAAmCD,mBAAU,SAAV,CAAnD;;AACA,MAAIH,IAAI,KAAK,GAAb,EAAkB;AAChBK,0BAAWC,OAAX,CACE,2BADF,EAEE,MAFF,EAGE;AACEC,MAAAA,iBAAiB,EAAE,MADrB;AAEEC,MAAAA,gBAAgB,EAAE,IAFpB;AAGEC,MAAAA,IAAI,EAAE;AAHR,KAHF,EAQEC,IARF,CAQO,YAAM;AACXC,qBAAMC,QAAN,CAAe,QAAf,EAAyBF,IAAzB,CAA8B,YAAM;AAClCG,QAAAA,QAAQ,CAACC,MAAT,GADkC,CAChB;AACnB,OAFD;AAGD,KAZD;AAaD,GAdD,MAcO,IAAId,IAAI,KAAK,GAAb,EAAkB;AACvB,4BAAQ;AACNE,MAAAA,OAAO,EAAEA,OADH;AAENO,MAAAA,IAAI,EAAE;AAFA,KAAR;AAIA,WAAOb,OAAO,CAACC,MAAR,CAAe,IAAIkB,KAAJ,CAAUb,OAAV,CAAf,CAAP;AACD,GANM,MAMA,IAAIF,IAAI,KAAK,GAAb,EAAkB;AACvBgB,4BAAavB,KAAb,CAAmB;AACjBwB,MAAAA,KAAK,EAAEf;AADU,KAAnB;;AAGA,WAAON,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD,GALM,MAKA;AACL,WAAOE,GAAG,CAACE,IAAX;AACD;AACF,CAjCH,EAkCE,UAAAR,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB;AACA,0BAAQ;AACNS,IAAAA,OAAO,EAAET,KAAK,CAACS,OADT;AAENO,IAAAA,IAAI,EAAE,OAFA;AAGNS,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAR;AAKA,SAAOtB,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA1CH;eA6CeZ,O","sourcesContent":["import axios from 'axios'\r\nimport { Notification, MessageBox, Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\nimport errorCode from '@/utils/errorCode'\r\n\r\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'\r\n// 创建axios实例\r\nconst service = axios.create({\r\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  // 超时\r\n  timeout: 10000\r\n})\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n  // 是否需要设置 token\r\n  const isToken = (config.headers || {}).isToken === false\r\n  if (getToken() && !isToken) {\r\n    config.headers['Authorization'] = 'Bearer ' + getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\r\n  }\r\n  return config\r\n}, error => {\r\n    console.log(error)\r\n    Promise.reject(error)\r\n})\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(res => {\r\n    // 未设置状态码则默认成功状态\r\n    const code = res.data.code || 200;\r\n    // 获取错误信息\r\n    const message = errorCode[code] || res.data.msg || errorCode['default']\r\n    if (code === 401) {\r\n      MessageBox.confirm(\r\n        '登录状态已过期，您可以继续留在该页面，或者重新登录',\r\n        '系统提示',\r\n        {\r\n          confirmButtonText: '重新登录',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      ).then(() => {\r\n        store.dispatch('LogOut').then(() => {\r\n          location.reload() // 为了重新实例化vue-router对象 避免bug\r\n        })\r\n      })\r\n    } else if (code === 500) {\r\n      Message({\r\n        message: message,\r\n        type: 'error'\r\n      })\r\n      return Promise.reject(new Error(message))\r\n    } else if (code !== 200) {\r\n      Notification.error({\r\n        title: message\r\n      })\r\n      return Promise.reject('error')\r\n    } else {\r\n      return res.data\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error)\r\n    Message({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"]}]}