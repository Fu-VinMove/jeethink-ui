{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/zipdownload.js","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/zipdownload.js","mtime":1590989844000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/fuwenmu/Downloads/jeethink\\u524D\\u540E\\u5206\\u79BB\\u5F00\\u53D1\\u6846\\u67B6/jeethink\\u5FEB\\u901F\\u5F00\\u53D1\\u6846\\u67B6\\uFF08\\u524D\\u540E\\u5206\\u79BB\\uFF09_V2.3/jeethink-ui/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.downLoadZip = downLoadZip;\nexports.resolveBlob = resolveBlob;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n};\nvar baseUrl = process.env.VUE_APP_BASE_API;\n\nfunction downLoadZip(str, filename) {\n  var url = baseUrl + str;\n  (0, _axios.default)({\n    method: 'get',\n    url: url,\n    responseType: 'blob',\n    headers: {\n      'Authorization': 'Bearer ' + (0, _auth.getToken)()\n    }\n  }).then(function (res) {\n    resolveBlob(res, mimeMap.zip);\n  });\n}\n/**\r\n * 解析blob响应内容并下载\r\n * @param {*} res blob响应内容\r\n * @param {String} mimeType MIME类型\r\n */\n\n\nfunction resolveBlob(res, mimeType) {\n  var aLink = document.createElement('a');\n  var blob = new Blob([res.data], {\n    type: mimeType\n  }); // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*');\n  var contentDisposition = decodeURI(res.headers['content-disposition']);\n  var result = patt.exec(contentDisposition);\n  var fileName = result[1];\n  fileName = fileName.replace(/\\\"/g, '');\n  aLink.href = URL.createObjectURL(blob);\n  aLink.setAttribute('download', fileName); // 设置下载文件名称\n\n  document.body.appendChild(aLink);\n  aLink.click();\n  document.body.appendChild(aLink);\n}",{"version":3,"sources":["/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/zipdownload.js"],"names":["mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","method","responseType","headers","then","res","resolveBlob","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","href","URL","createObjectURL","setAttribute","body","appendChild","click"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,mEADQ;AAEdC,EAAAA,GAAG,EAAE;AAFS,CAAhB;AAKA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;;AACO,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,QAA1B,EAAoC;AACzC,MAAIC,GAAG,GAAGP,OAAO,GAAGK,GAApB;AACA,sBAAM;AACJG,IAAAA,MAAM,EAAE,KADJ;AAEJD,IAAAA,GAAG,EAAEA,GAFD;AAGJE,IAAAA,YAAY,EAAE,MAHV;AAIJC,IAAAA,OAAO,EAAE;AAAE,uBAAiB,YAAY;AAA/B;AAJL,GAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACbC,IAAAA,WAAW,CAACD,GAAD,EAAMf,OAAO,CAACE,GAAd,CAAX;AACD,GAPD;AAQD;AACD;;;;;;;AAKO,SAASc,WAAT,CAAqBD,GAArB,EAA0BE,QAA1B,EAAoC;AACzC,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;AACA,MAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACP,GAAG,CAACQ,IAAL,CAAT,EAAqB;AAAEC,IAAAA,IAAI,EAAEP;AAAR,GAArB,CAAX,CAFyC,CAGzC;;AACA,MAAIQ,IAAI,GAAG,IAAIC,MAAJ,CAAW,+BAAX,CAAX;AACA,MAAIC,kBAAkB,GAAGC,SAAS,CAACb,GAAG,CAACF,OAAJ,CAAY,qBAAZ,CAAD,CAAlC;AACA,MAAIgB,MAAM,GAAGJ,IAAI,CAACK,IAAL,CAAUH,kBAAV,CAAb;AACA,MAAII,QAAQ,GAAGF,MAAM,CAAC,CAAD,CAArB;AACAE,EAAAA,QAAQ,GAAGA,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;AACAd,EAAAA,KAAK,CAACe,IAAN,GAAaC,GAAG,CAACC,eAAJ,CAAoBd,IAApB,CAAb;AACAH,EAAAA,KAAK,CAACkB,YAAN,CAAmB,UAAnB,EAA+BL,QAA/B,EAVyC,CAUA;;AACzCZ,EAAAA,QAAQ,CAACkB,IAAT,CAAcC,WAAd,CAA0BpB,KAA1B;AACAA,EAAAA,KAAK,CAACqB,KAAN;AACApB,EAAAA,QAAQ,CAACkB,IAAT,CAAcC,WAAd,CAA0BpB,KAA1B;AACD","sourcesContent":["import axios from 'axios'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nconst mimeMap = {\r\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  zip: 'application/zip'\r\n}\r\n\r\nconst baseUrl = process.env.VUE_APP_BASE_API\r\nexport function downLoadZip(str, filename) {\r\n  var url = baseUrl + str\r\n  axios({\r\n    method: 'get',\r\n    url: url,\r\n    responseType: 'blob',\r\n    headers: { 'Authorization': 'Bearer ' + getToken() }\r\n  }).then(res => {\r\n    resolveBlob(res, mimeMap.zip)\r\n  })\r\n}\r\n/**\r\n * 解析blob响应内容并下载\r\n * @param {*} res blob响应内容\r\n * @param {String} mimeType MIME类型\r\n */\r\nexport function resolveBlob(res, mimeType) {\r\n  const aLink = document.createElement('a')\r\n  var blob = new Blob([res.data], { type: mimeType })\r\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\r\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\r\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\r\n  var result = patt.exec(contentDisposition)\r\n  var fileName = result[1]\r\n  fileName = fileName.replace(/\\\"/g, '')\r\n  aLink.href = URL.createObjectURL(blob)\r\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\r\n  document.body.appendChild(aLink)\r\n  aLink.click()\r\n  document.body.appendChild(aLink)\r\n}\r\n"]}]}