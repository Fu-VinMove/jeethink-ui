{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/store/modules/user.js","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/store/modules/user.js","mtime":1590989844000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _login = require(\"@/api/login\");\n\nvar _auth = require(\"@/utils/auth\");\n\nvar user = {\n  state: {\n    token: (0, _auth.getToken)(),\n    name: '',\n    avatar: '',\n    roles: [],\n    permissions: []\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_NAME: function SET_NAME(state, name) {\n      state.name = name;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_PERMISSIONS: function SET_PERMISSIONS(state, permissions) {\n      state.permissions = permissions;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, userInfo) {\n      var commit = _ref.commit;\n      var username = userInfo.username.trim();\n      var password = userInfo.password;\n      var code = userInfo.code;\n      var uuid = userInfo.uuid;\n      return new Promise(function (resolve, reject) {\n        (0, _login.login)(username, password, code, uuid).then(function (res) {\n          (0, _auth.setToken)(res.token);\n          commit('SET_TOKEN', res.token);\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 获取用户信息\n    GetInfo: function GetInfo(_ref2) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      return new Promise(function (resolve, reject) {\n        (0, _login.getInfo)(state.token).then(function (res) {\n          var user = res.user;\n          var avatar = user.avatar == \"\" ? require(\"@/assets/image/profile.jpg\") : process.env.VUE_APP_BASE_API + user.avatar;\n\n          if (res.roles && res.roles.length > 0) {\n            // 验证返回的roles是否是一个非空数组\n            commit('SET_ROLES', res.roles);\n            commit('SET_PERMISSIONS', res.permissions);\n          } else {\n            commit('SET_ROLES', ['ROLE_DEFAULT']);\n          }\n\n          commit('SET_NAME', user.userName);\n          commit('SET_AVATAR', avatar);\n          resolve(res);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 退出系统\n    LogOut: function LogOut(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new Promise(function (resolve, reject) {\n        (0, _login.logout)(state.token).then(function () {\n          commit('SET_TOKEN', '');\n          commit('SET_ROLES', []);\n          commit('SET_PERMISSIONS', []);\n          (0, _auth.removeToken)();\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 前端 登出\n    FedLogOut: function FedLogOut(_ref4) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        (0, _auth.removeToken)();\n        resolve();\n      });\n    }\n  }\n};\nvar _default = user;\nexports.default = _default;",{"version":3,"sources":["/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/store/modules/user.js"],"names":["user","state","token","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","Login","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","then","res","catch","error","GetInfo","require","process","env","VUE_APP_BASE_API","length","userName","LogOut","FedLogOut"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/login'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\n\r\nconst user = {\r\n  state: {\r\n    token: getToken(),\r\n    name: '',\r\n    avatar: '',\r\n    roles: [],\r\n    permissions: []\r\n  },\r\n\r\n  mutations: {\r\n    SET_TOKEN: (state, token) => {\r\n      state.token = token\r\n    },\r\n    SET_NAME: (state, name) => {\r\n      state.name = name\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    },\r\n    SET_ROLES: (state, roles) => {\r\n      state.roles = roles\r\n    },\r\n    SET_PERMISSIONS: (state, permissions) => {\r\n      state.permissions = permissions\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    // 登录\r\n    Login({ commit }, userInfo) {\r\n      const username = userInfo.username.trim()\r\n      const password = userInfo.password\r\n      const code = userInfo.code\r\n      const uuid = userInfo.uuid\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password, code, uuid).then(res => {\r\n          setToken(res.token)\r\n          commit('SET_TOKEN', res.token)\r\n          resolve()\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 获取用户信息\r\n    GetInfo({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        getInfo(state.token).then(res => {\r\n          const user = res.user\r\n          const avatar = user.avatar == \"\" ? require(\"@/assets/image/profile.jpg\") : process.env.VUE_APP_BASE_API + user.avatar;\r\n          if (res.roles && res.roles.length > 0) { // 验证返回的roles是否是一个非空数组\r\n            commit('SET_ROLES', res.roles)\r\n            commit('SET_PERMISSIONS', res.permissions)\r\n          } else {\r\n            commit('SET_ROLES', ['ROLE_DEFAULT'])\r\n          }\r\n          commit('SET_NAME', user.userName)\r\n          commit('SET_AVATAR', avatar)\r\n          resolve(res)\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n    \r\n    // 退出系统\r\n    LogOut({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        logout(state.token).then(() => {\r\n          commit('SET_TOKEN', '')\r\n          commit('SET_ROLES', [])\r\n          commit('SET_PERMISSIONS', [])\r\n          removeToken()\r\n          resolve()\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 前端 登出\r\n    FedLogOut({ commit }) {\r\n      return new Promise(resolve => {\r\n        commit('SET_TOKEN', '')\r\n        removeToken()\r\n        resolve()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default user\r\n"]}]}