{"remainingRequest":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/thread-loader/dist/cjs.js!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js!/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/zipdownload.js","dependencies":[{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/src/utils/zipdownload.js","mtime":1590989844000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuwenmu/Downloads/jeethink前后分离开发框架/jeethink快速开发框架（前后分离）_V2.3/jeethink-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport axios from 'axios';\nimport { getToken } from '@/utils/auth';\nvar mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n};\nvar baseUrl = process.env.VUE_APP_BASE_API;\nexport function downLoadZip(str, filename) {\n  var url = baseUrl + str;\n  axios({\n    method: 'get',\n    url: url,\n    responseType: 'blob',\n    headers: {\n      'Authorization': 'Bearer ' + getToken()\n    }\n  }).then(function (res) {\n    resolveBlob(res, mimeMap.zip);\n  });\n}\n/**\r\n * 解析blob响应内容并下载\r\n * @param {*} res blob响应内容\r\n * @param {String} mimeType MIME类型\r\n */\n\nexport function resolveBlob(res, mimeType) {\n  var aLink = document.createElement('a');\n  var blob = new Blob([res.data], {\n    type: mimeType\n  }); // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*');\n  var contentDisposition = decodeURI(res.headers['content-disposition']);\n  var result = patt.exec(contentDisposition);\n  var fileName = result[1];\n  fileName = fileName.replace(/\\\"/g, '');\n  aLink.href = URL.createObjectURL(blob);\n  aLink.setAttribute('download', fileName); // 设置下载文件名称\n\n  document.body.appendChild(aLink);\n  aLink.click();\n  document.body.appendChild(aLink);\n}",null]}